<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Proposal QR Generator üíç</title>
<style>
  :root{
    --bg1:#080018; --bg2:#24003a; --pink:#ff4da6; --gold:#ffd27a;
  }
  *{box-sizing:border-box}
  body{
    margin:0; min-height:100vh;
    display:grid; place-items:center;
    background: radial-gradient(900px 600px at 20% 15%, rgba(255,77,166,.18), transparent 55%),
                radial-gradient(900px 600px at 80% 30%, rgba(255,210,122,.12), transparent 55%),
                linear-gradient(135deg,var(--bg1),var(--bg2));
    font-family: ui-sans-serif, system-ui, Segoe UI, Roboto, Arial;
    color:#fff;
  }
  .box{
    width:min(420px, 92vw);
    background: rgba(255,255,255,.08);
    border:1px solid rgba(255,255,255,.15);
    border-radius:22px;
    padding:22px 18px;
    backdrop-filter: blur(12px);
    box-shadow: 0 25px 80px rgba(0,0,0,.35);
  }
  h1{margin:6px 0 4px; font-size:22px; color:#ff7fc0}
  p{margin:0 0 14px; color:rgba(255,255,255,.78); font-size:13px; line-height:1.4}
  label{font-size:12px; color:rgba(255,255,255,.75)}
  input,textarea{
    width:100%;
    margin:8px 0 12px;
    padding:12px 12px;
    border-radius:14px;
    border:1px solid rgba(255,255,255,.16);
    background: rgba(0,0,0,.22);
    color:#fff;
    outline:none;
    font-size:14px;
  }
  textarea{min-height:90px; resize:none}
  .row{display:flex; gap:10px}
  .btn{
    width:100%;
    padding:12px 14px;
    border:0;
    border-radius:14px;
    cursor:pointer;
    font-weight:800;
    letter-spacing:.2px;
    background: linear-gradient(135deg, var(--pink), var(--gold));
    color:#1b0025;
  }
  .btn2{
    background: rgba(255,255,255,.10);
    border:1px solid rgba(255,255,255,.18);
    color:#fff;
  }
  #qr{
    margin-top:14px;
    display:grid;
    place-items:center;
    padding:14px;
    border-radius:18px;
    border:1px dashed rgba(255,255,255,.22);
    background: rgba(0,0,0,.15);
  }
  .small{
    margin-top:10px;
    font-size:12px;
    color:rgba(255,255,255,.7);
  }
  .small code{
    font-family: ui-monospace, SFMono-Regular, Menlo, monospace;
    color:#ffd27a;
  }
</style>
</head>
<body>

<div class="box">
  <h1>üíç Proposal QR Generator</h1>
  <p>Naam + message likho ‚Üí QR banao ‚Üí scan par <b>Galaxy Proposal Page</b> open hoga.</p>

  <label>Recipient Name</label>
  <input id="name" placeholder="e.g. Ayesha" />

  <label>Your Message</label>
  <textarea id="msg" placeholder="e.g. Tum meri duniya ho..."></textarea>

  <label style="display:block;margin-top:2px;">(Optional) Base URL</label>
  <input id="baseUrl" placeholder="https://your-site.com/valentine-qr/" />

  <div class="row">
    <button class="btn" onclick="generateQR()">Generate QR</button>
    <button class="btn btn2" onclick="copyLink()">Copy Link</button>
  </div>

  <div id="qr">QR will appear here</div>
  <div class="small">
    Tip: Agar local file pe open kar rahe ho, <code>Base URL</code> fill karo (hosting link).
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
<script>
  let lastUrl = "";

  function buildBase(){
    const manual = document.getElementById("baseUrl").value.trim();
    if(manual) return manual.replace(/\/?$/, "/"); // ensure trailing slash
    // Online hosting case
    const path = location.pathname.replace(/index\.html?$/i, "");
    return location.origin + path;
  }

  function generateQR(){
    const name = encodeURIComponent(document.getElementById("name").value.trim());
    const msg  = encodeURIComponent(document.getElementById("msg").value.trim());

    if(!name || !msg){
      alert("Please enter name & message ‚ù§Ô∏è");
      return;
    }

    const base = buildBase();
    lastUrl = `${base}love.html?name=${name}&msg=${msg}`;

    const qrBox = document.getElementById("qr");
    qrBox.innerHTML = "";
    new QRCode(qrBox,{
      text: lastUrl,
      width: 220,
      height: 220,
      correctLevel: QRCode.CorrectLevel.H
    });

    const note = document.createElement("div");
    note.className = "small";
    note.style.marginTop = "10px";
    note.innerHTML = `Link: <code style="word-break:break-all">${lastUrl}</code>`;
    qrBox.appendChild(note);
  }

  async function copyLink(){
    if(!lastUrl){
      generateQR();
      if(!lastUrl) return;
    }
    try{
      await navigator.clipboard.writeText(lastUrl);
      alert("Link copied ‚úÖ");
    }catch{
      prompt("Copy this link:", lastUrl);
    }
  }
</script>
</body>
</html>
